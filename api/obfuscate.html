<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Lua / LuaU Obfuscator | yourscoper</title>
  <style>
    body { font-family: 'Segoe UI', sans-serif; background: #0d1117; color: #c9d1d9; margin:0; padding:20px; }
    h1 { color: #58a6ff; text-align:center; }
    .container { max-width:1200px; margin:0 auto; display:grid; grid-template-columns:1fr 1fr; gap:20px; }
    textarea { width:100%; height:400px; background:#161b22; color:#c9d1d9; border:1px solid #30363d; border-radius:6px; padding:12px; font-family:Consolas,monospace; font-size:14px; }
    button { background:#238636; color:white; border:none; padding:12px 24px; border-radius:6px; cursor:pointer; margin:10px; }
    button:hover { background:#2ea043; }
    #output { background:#161b22; border:1px solid #30363d; border-radius:6px; padding:12px; white-space:pre-wrap; font-family:Consolas; min-height:400px; overflow-y:auto; }
    .controls { text-align:center; }
  </style>
</head>
<body>
  <h1>Lua / LuaU Obfuscator</h1>
  <p style="text-align:center; color:#8b949e;">Paste Lua/LuaU code → Obfuscate → Copy result. Client-side only (basic protection).</p>

  <div class="container">
    <div>
      <h3>Input Code</h3>
      <textarea id="input" placeholder="local var = 'hello'\nprint(var)"></textarea>
    </div>
    <div>
      <h3>Obfuscated Output</h3>
      <pre id="output">-- output here</pre>
    </div>
  </div>

  <div class="controls">
    <button onclick="obfuscate()">Obfuscate</button>
    <button onclick="navigator.clipboard.writeText(document.getElementById('output').textContent).then(()=>alert('Copied!'))">Copy</button>
    <button onclick="document.getElementById('input').value='';document.getElementById('output').textContent='';">Clear</button>
  </div>

  <script>
    function randomName() {
      const c = "abcdefghijklmnopqrstuvwxyz_$ABCDEFGHIJKLMNOPQRSTUVWXYZ";
      let n = "_0x";
      for(let i=0;i<10+Math.random()*8|0;i++) n += c[Math.random()*c.length|0];
      return n;
    }

    function xorEncrypt(s) {
      const k = Math.floor(Math.random()*200)+50;
      let r = "";
      for(let i=0;i<s.length;i++) r += String.fromCharCode(s.charCodeAt(i) ^ (k + i%23));
      return {enc: btoa(r), key: k};
    }

    function fakeJunk() {
      return Math.random()>0.6 ? `if math.random(1,9)>10 then end -- junk\n` : `local _ = ${Math.random()*1000|0}\n`;
    }

    function obfuscate() {
      let code = document.getElementById("input").value.trim();
      if(!code) return document.getElementById("output").textContent = "-- No code";

      // Remove comments & minify
      code = code.replace(/--[^\n]*|\/\*[\s\S]*?\*\//g,'').replace(/\s+/g,' ');

      // Simple var rename
      const map = new Map();
      (code.match(/\b[a-zA-Z_][a-zA-Z0-9_]*\b/g) || []).forEach(v => {
        if(!['function','local','if','end','return','print','then','else'].includes(v) && !map.has(v)) map.set(v, randomName());
      });
      for(const [o,n] of map) code = code.replace(new RegExp(`\\b${o}\\b`,'g'), n);

      // String encrypt (XOR + base64 + decoder)
      code = code.replace(/["']([^"']*)["']/g, (_,s) => {
        if(s.length<3) return `"${s}"`;
        const {enc,key} = xorEncrypt(s);
        return `(function(x,k) local r="" for i=1,#x do r=r..string.char(x:byte(i)~ (k + (i-1)%23)) end return r end)("${enc}",${key})`;
      });

      // Numbers to hex + junk
      code = code.replace(/\b\d+\b/g, n => parseInt(n)>15 ? "0x"+parseInt(n).toString(16).toUpperCase() : n);
      let lines = code.split('\n');
      let obf = "do\n";
      lines.forEach(l => { if(Math.random()>0.65) obf += fakeJunk(); obf += l+'\n'; });
      obf += "end";

      document.getElementById("output").textContent = obf;
    }
  </script>
</body>
</html>
